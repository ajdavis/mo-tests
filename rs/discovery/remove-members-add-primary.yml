description: "Client detects changes in replica set"

setup: {
          MO-requests: [{ request: { method: "POST",
                                     uri: "replica_sets",
                                     payload: { members: [
                                                    {
                                                        procParams: {
                                                            nohttpinterface: true,
                                                            journal: true,
                                                            noprealloc: true,
                                                            nssize: 1,
                                                            oplogSize: 150,
                                                            smallfiles: true
                                                        }
                                                    },
                                                    {
                                                        procParams: {
                                                            nohttpinterface: true,
                                                            journal: true,
                                                            noprealloc: true,
                                                            nssize: 1,
                                                            oplogSize: 150,
                                                            smallfiles: true
                                                        }
                                                    },
                                                    {
                                                        procParams: {
                                                            nohttpinterface: true,
                                                            journal: true,
                                                            noprealloc: true,
                                                            nssize: 1,
                                                            oplogSize: 150,
                                                            smallfiles: true
                                                        }
                                                    }
                                                ]
                                              }

                        } }],
          uriReferenceInResponse: &uriReferenceInResponse "mongodb_uri",
          clientUri: { base: *uriReferenceInResponse },
        }

phases: [
          {
            mo-operations: [ { member: 0,
                               request: { method: "GET",
                                          rel-link: "get-server-info" }
                             },
                             { request: { method: "POST",
                                          rel-link: "server-command",
                                          payload: { action: "stop" } }
                             }]
          },
          {
            operation: "findOne",
            outcome: { ok: 1 }
          },
          {
            mo-operations: [ { request: { method: "POST",
                                          uri: "/members",
                                          paylod: { rsParams: { priority: 1 } }
                                        }
                             },
                             { request: { method: "POST",
                                          uri: "/members",
                                          paylod: { rsParams: { priority: 0 } }
                                        }
                             }]
          }
        ]
tests: [
          { members: [ 1, 2, 3, 4 ] }
       ]


